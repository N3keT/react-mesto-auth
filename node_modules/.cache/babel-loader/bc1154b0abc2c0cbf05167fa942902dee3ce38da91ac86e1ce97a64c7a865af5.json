{"ast":null,"code":"import _classCallCheck from\"/Users/n3ket/Desktop/Yandex_practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/n3ket/Desktop/Yandex_practicum/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var ApiAuth=/*#__PURE__*/function(){function ApiAuth(baseUrl){_classCallCheck(this,ApiAuth);this._baseUrl=baseUrl;}_createClass(ApiAuth,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"register\",value:function register(email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"password\":password,\"email\":email})}).then(this._checkResponse);}},{key:\"login\",value:function login(data){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"password\":data.password,\"email\":data.email})}).then(this._checkResponse).then(function(data){localStorage.setItem(\"jwt\",data.token);return data;});}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(this._checkResponse);}}]);return ApiAuth;}();var apiAuth=new ApiAuth('https://auth.nomoreparties.co/');export default apiAuth;","map":{"version":3,"names":["ApiAuth","baseUrl","_baseUrl","res","ok","json","Promise","reject","status","email","password","fetch","method","headers","body","JSON","stringify","then","_checkResponse","data","localStorage","setItem","token","apiAuth"],"sources":["/Users/n3ket/Desktop/Yandex_practicum/react-mesto-auth/src/utils/ApiAuth.js"],"sourcesContent":["class ApiAuth {\n    constructor(baseUrl) {\n        this._baseUrl = baseUrl;\n    }\n\n    _checkResponse(res) {\n        if (res.ok) {\n            return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    register(email, password) {\n        return fetch(`${this._baseUrl}/signup`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                \"password\": password,\n                \"email\": email\n            }),\n        })\n        .then(this._checkResponse);\n    }\n\n    login (data) {\n        return fetch(`${this._baseUrl}/signin`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n                \"password\": data.password,\n                \"email\": data.email\n            }),\n        })\n        .then(this._checkResponse)\n        .then((data) => {\n            localStorage.setItem(\"jwt\", data.token);\n            return data;\n        });\n    }\n\n    checkToken(token) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\" : `Bearer ${token}`\n            },\n        })\n        .then(this._checkResponse);\n    }\n}\n\nconst apiAuth = new ApiAuth('https://auth.nomoreparties.co/');\n\nexport default apiAuth;"],"mappings":"yRAAMA,QAAO,yBACT,iBAAYC,OAAO,CAAE,+BACjB,IAAI,CAACC,QAAQ,CAAGD,OAAO,CAC3B,CAAC,kDAED,wBAAeE,GAAG,CAAE,CAChB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACR,MAAOD,IAAG,CAACE,IAAI,EAAE,CACrB,CACA,MAAOC,QAAO,CAACC,MAAM,iDAAYJ,GAAG,CAACK,MAAM,EAAG,CAClD,CAAC,wBAED,kBAASC,KAAK,CAAEC,QAAQ,CAAE,CACtB,MAAOC,MAAK,WAAI,IAAI,CAACT,QAAQ,YAAW,CACpCU,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB,UAAU,CAAEN,QAAQ,CACpB,OAAO,CAAED,KACb,CAAC,CACL,CAAC,CAAC,CACDQ,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,qBAED,eAAOC,IAAI,CAAE,CACT,MAAOR,MAAK,WAAI,IAAI,CAACT,QAAQ,YAAW,CACpCU,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB,UAAU,CAAEG,IAAI,CAACT,QAAQ,CACzB,OAAO,CAAES,IAAI,CAACV,KAClB,CAAC,CACL,CAAC,CAAC,CACDQ,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CACzBD,IAAI,CAAC,SAACE,IAAI,CAAK,CACZC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEF,IAAI,CAACG,KAAK,CAAC,CACvC,MAAOH,KAAI,CACf,CAAC,CAAC,CACN,CAAC,0BAED,oBAAWG,KAAK,CAAE,CACd,MAAOX,MAAK,WAAI,IAAI,CAACT,QAAQ,cAAa,CACtCU,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,eAAe,kBAAaS,KAAK,CACrC,CACJ,CAAC,CAAC,CACDL,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CAC9B,CAAC,uBAGL,GAAMK,QAAO,CAAG,GAAIvB,QAAO,CAAC,gCAAgC,CAAC,CAE7D,cAAeuB,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}