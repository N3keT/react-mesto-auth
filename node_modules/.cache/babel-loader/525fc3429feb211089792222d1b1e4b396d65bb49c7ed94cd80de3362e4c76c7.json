{"ast":null,"code":"import _toConsumableArray from\"/Users/n3ket/Desktop/Yandex_practicum/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/n3ket/Desktop/Yandex_practicum/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupWithForm from'./PopupWithForm';import ImagePopup from'./ImagePopup';import api from'../utils/Api';import{CurrentUserContext}from'../contexts/CurrentUserContext';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import DeletePlacePopup from'./DeletePlacePopup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setEditAvatarPopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeletePlacePopupOpen=_useState8[0],setDeletePlacePopupOpen=_useState8[1];var _useState9=useState({isOpen:false}),_useState10=_slicedToArray(_useState9,2),selectedCard=_useState10[0],setSelectedCard=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),currentUser=_useState12[0],setCurrentUser=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),cards=_useState14[0],setCards=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),cardDelete=_useState16[0],setCardDelete=_useState16[1];useEffect(function(){api.getInitialCards().then(function(cards){setCards(cards);}).catch(function(err){console.log(err);});},[]);useEffect(function(){api.getUserInfo().then(function(user){setCurrentUser(user);}).catch(function(err){console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(cards.filter(function(c){return c._id!==card._id;}));closeAllPopups();}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(data){api.addNewCard(data).then(function(result){setCards([result].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);});}function handleEditProfileClick(){setEditProfilePopupOpen(true);}function handleAddPlaceClick(){setAddPlacePopupOpen(true);}function handleEditAvatarClick(){setEditAvatarPopupOpen(true);}function handleDeletePlaceClick(card){setDeletePlacePopupOpen(true);setCardDelete(card);}function closeAllPopups(){setEditProfilePopupOpen(false);setAddPlacePopupOpen(false);setEditAvatarPopupOpen(false);setDeletePlacePopupOpen(false);setSelectedCard({isOpen:false});}function handleCardClick(card){setSelectedCard({isOpen:true,link:card.link,name:card.name});}function handleUpdateUser(data){api.setUserInfo(data).then(function(result){setCurrentUser(result);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(data){api.setAvatar(data).then(function(result){setCurrentUser(result);closeAllPopups();}).catch(function(err){console.log(err);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(\"div\",{className:\"page_background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleDeletePlaceClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(DeletePlacePopup,{isOpen:isDeletePlacePopupOpen,onClose:closeAllPopups,onDeletePlace:handleCardDelete,card:cardDelete})]})})});}export default App;","map":{"version":3,"names":["useState","useEffect","Header","Main","Footer","PopupWithForm","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeletePlacePopup","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeletePlacePopupOpen","setDeletePlacePopupOpen","isOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","cardDelete","setCardDelete","getInitialCards","then","catch","err","console","log","getUserInfo","user","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","closeAllPopups","handleAddPlaceSubmit","data","addNewCard","result","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleDeletePlaceClick","handleCardClick","link","name","handleUpdateUser","setUserInfo","handleUpdateAvatar","setAvatar"],"sources":["/Users/n3ket/Desktop/Yandex_practicum/mesto-react/src/components/App.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/Api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeletePlacePopup from './DeletePlacePopup';\n\nfunction App() {\n    const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n    const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n    const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n    const [isDeletePlacePopupOpen, setDeletePlacePopupOpen] = useState(false);\n    const [selectedCard, setSelectedCard] = useState({isOpen: false});\n    const [currentUser, setCurrentUser] = useState({});\n    const[cards, setCards] = useState([]);\n    const [cardDelete, setCardDelete] = useState({});\n\n    useEffect(() => {\n        api.getInitialCards()\n        .then((cards) => {\n            setCards(cards);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }, []);\n\n    useEffect(() => {\n        api.getUserInfo()\n        .then((user) => {\n            setCurrentUser(user);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }, []);\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        \n        api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n        .then(() => {\n            setCards(cards.filter((c) => {\n                return c._id !== card._id;\n            }));\n            closeAllPopups();\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    function handleAddPlaceSubmit(data) {\n        api.addNewCard(data)\n        .then((result) => {\n            setCards([result, ...cards]);\n            closeAllPopups();\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    function handleEditProfileClick() {\n        setEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setEditAvatarPopupOpen(true);\n    }\n\n    function handleDeletePlaceClick(card) {\n        setDeletePlacePopupOpen(true);\n        setCardDelete(card);\n    }\n\n    function closeAllPopups() {\n        setEditProfilePopupOpen(false);\n        setAddPlacePopupOpen(false);\n        setEditAvatarPopupOpen(false);\n        setDeletePlacePopupOpen(false);\n        setSelectedCard({isOpen: false});\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard({\n            isOpen: true,\n            link: card.link,\n            name: card.name,\n        });\n    }\n\n    function handleUpdateUser(data) {\n        api.setUserInfo(data)\n        .then((result) => {\n            setCurrentUser(result);\n            closeAllPopups();\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    function handleUpdateAvatar(data) {\n        api.setAvatar(data)\n        .then((result) => {\n            setCurrentUser(result);\n            closeAllPopups();\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n    }\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page_background\">\n                <div className=\"page\">\n                    <Header />\n                    <Main\n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick}\n                        onEditAvatar={handleEditAvatarClick}\n                        onCardClick={handleCardClick}\n                        cards={cards}\n                        onCardLike={handleCardLike}\n                        onCardDelete={handleDeletePlaceClick}\n                        />\n                    <Footer />\n                    <ImagePopup\n                        card={selectedCard}\n                        onClose={closeAllPopups}\n                    />\n                    <EditProfilePopup\n                        isOpen={isEditProfilePopupOpen}\n                        onClose={closeAllPopups}\n                        onUpdateUser={handleUpdateUser}\n                    />\n                    <AddPlacePopup\n                        isOpen={isAddPlacePopupOpen}\n                        onClose={closeAllPopups}\n                        onAddPlace={handleAddPlaceSubmit}\n                    />\n                    <EditAvatarPopup\n                        isOpen={isEditAvatarPopupOpen}\n                        onClose={closeAllPopups}\n                        onUpdateAvatar={handleUpdateAvatar}\n                    />\n                    <DeletePlacePopup\n                        isOpen={isDeletePlacePopupOpen}\n                        onClose={closeAllPopups}\n                        onDeletePlace={handleCardDelete}\n                        card={cardDelete}\n                    />\n                </div>\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}